{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nexport const findPhotos =  (searchedValue, page) => {\n    const axiosOptions = {\n        params: {\n            key: '49462102-62c5bd388bb9085ad52d727ed',\n            q: searchedValue,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true,\n            page: page,\n            per_page: 15,\n        },\n    };\n\n        return axios.get('', axiosOptions); \n};","export const createGalleryCardTemplate = photoInfo => {\n    return `<li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${photoInfo.largeImageURL}\">\n    <img\n      class=\"gallery-img\"\n      src=\"${photoInfo.webformatURL}\"\n      alt=\"${photoInfo.tags}\"\n      loading=\"lazy\"\n    />\n  </a>\n  <ul class=\"gallery-info\">\n    <li class=\"gallery-info-item\">\n      <p class=\"gallery-info-title\">Likes</p>\n      <p class=\"gallery-info-text\">${photoInfo.likes}</p>\n    </li>\n    <li class=\"gallery-info-item\">\n      <p class=\"gallery-info-title\">Views</p>\n      <p class=\"gallery-info-text\">${photoInfo.views}</p>\n    </li>\n    <li class=\"gallery-info-item\">\n      <p class=\"gallery-info-title\">Comments</p>\n      <p class=\"gallery-info-text\">${photoInfo.comments}</p>\n    </li>\n    <li class=\"gallery-info-item\">\n      <p class=\"gallery-info-title\">Downloads</p>\n      <p class=\"gallery-info-text\">${photoInfo.downloads}</p>\n    </li>\n  </ul>\n</li>`;\n};","import iziToast from \"izitoast\";\nimport { findPhotos } from \"./js/pixabay-api\";\nimport SimpleLightbox from \"simplelightbox\";\nimport { createGalleryCardTemplate } from \"./js/render-functions\";\n\nconst searchFormEl = document.querySelector('.form-search');\nconst galleryEl = document.querySelector('.gallery');\nconst loaderEl = document.querySelector('.loader');\nconst loadMoreBtnEl = document.querySelector('.load-more-btn');\nconst lightbox  = new SimpleLightbox('.gallery a', {\n    captionDelay: 250,\n    captionPosition: 'bottom',\n    captionsData: 'alt',\n    overlayOpacity: 1,\n});\nlet currentPage = 1;\nlet searchedValue = '';\nlet quantityElements = 0;\n\nconst searchFormSubmit = async event => {\n    try {\n    event.preventDefault();\n\n    searchedValue = searchFormEl.elements[\"search-text\"].value.trim();\n\n    if (searchedValue === '') {\n        iziToast.warning({\n            message: 'Please enter a search query.',\n            position: 'bottomRight',\n        });\n        return;\n        }\n        galleryEl.innerHTML = ''; \n        quantityElements = 0;\n        loadMoreBtnEl.classList.add('is-hidden');\n        loaderEl.classList.remove('is-hidden'); \n        currentPage = 1;\n        const response = await findPhotos(searchedValue, currentPage); \n        const data = response.data; \n\n        if (!data.hits || data.hits.length === 0) {\n                iziToast.error({\n                    message: 'Sorry, there are no images matching your search query. Please try again!',\n                    position: 'bottomRight'\n                });\n                galleryEl.innerHTML = '';\n                searchFormEl.reset();\n                loaderEl.classList.add('is-hidden'); \n                loadMoreBtnEl.classList.add('is-hidden');\n                return;\n            }\n\n            const galleryCardsTemplate = data.hits\n                .map(imgDetails => createGalleryCardTemplate(imgDetails))\n                .join('');\n            galleryEl.innerHTML = galleryCardsTemplate;\n            lightbox.refresh();\n            loadMoreBtnEl.classList.remove('is-hidden');\n            searchFormEl.reset();\n            quantityElements += response.data.hits.length;\n    }   catch (err) {\n            console.log(err);\n            iziToast.error({\n                message: 'An error occurred. Please try again later.',\n                position: 'bottomRight',\n            });\n        }   finally {\n            loaderEl.classList.add('is-hidden');\n    }\n};\n\nconst onLoadMorePhoto = async () => {\n    try {\n        loaderEl.classList.remove('is-hidden');\n        currentPage++;\n        const response = await findPhotos(searchedValue, currentPage); \n        const data = response.data;\n\n        if (!data.hits || data.hits.length === 0) {\n            iziToast.show({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: 'topRight',\n            });\n            loadMoreBtnEl.classList.add('is-hidden');  \n            return;\n        }\n        const galleryCardsTemplate = data.hits\n            .map(imgDetails => createGalleryCardTemplate(imgDetails))\n            .join('');\n            galleryEl.insertAdjacentHTML('beforeend', galleryCardsTemplate);\n            lightbox.refresh();\n\n        const firstCard = galleryEl.firstElementChild;\n        const { height: cardHeight } = firstCard.getBoundingClientRect();\n        \n        window.scrollBy({\n            top: cardHeight * 2,\n            behavior: 'smooth',\n        });\n        quantityElements += response.data.hits.length;\n\n        if (Math.ceil(data.totalHits / 15) === currentPage) {\n            iziToast.show({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: 'topRight',\n            });\n            loadMoreBtnEl.classList.add('is-hidden');\n        }\n    } catch (err) {\n        console.log(err);\n    } finally {\n        loaderEl.classList.add('is-hidden');\n    }\n};\n    \nsearchFormEl.addEventListener('submit', searchFormSubmit);\n\nloadMoreBtnEl.addEventListener('click', onLoadMorePhoto);"],"names":["axios","findPhotos","searchedValue","page","axiosOptions","createGalleryCardTemplate","photoInfo","searchFormEl","galleryEl","loaderEl","loadMoreBtnEl","lightbox","SimpleLightbox","currentPage","quantityElements","searchFormSubmit","event","iziToast","response","data","galleryCardsTemplate","imgDetails","err","onLoadMorePhoto","firstCard","cardHeight"],"mappings":"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"}